# 서블릿(Servlet) 개념

서블릿(Servlet)은 Java EE 기반의 웹 애플리케이션에서 서버 측에서 클라이언트의 요청을 처리하고 응답을 생성하는 Java 클래스이다. 서블릿은 HTTP 요청을 처리하고, 동적인 웹 페이지를 생성하는 역할을 한다. 서블릿은 서버에서 실행되며, 요청과 응답 객체를 통해 클라이언트와 상호작용한다.

---

## 서블릿의 주요 역할

1. **요청 처리**: 서블릿은 클라이언트가 보낸 요청을 받아 처리한다. 이때 `HttpServletRequest` 객체를 통해 요청 정보를 받고, `HttpServletResponse` 객체를 통해 응답을 생성한다.

2. **응답 생성**: 서블릿은 처리된 데이터를 기반으로 동적인 HTML, JSON, XML 등의 응답을 생성하여 클라이언트에게 반환한다.

3. **세션 관리**: 서블릿은 클라이언트와의 세션을 관리할 수 있다. 쿠키나 URL 리디렉션을 통해 세션 정보를 저장하고 유지할 수 있다.

4. **서버와의 통신**: 서블릿은 외부 API나 데이터베이스와 통신하여 데이터를 가져와 동적으로 웹 페이지를 생성할 수 있다.

---

## 서블릿의 생명주기

서블릿의 생명주기는 크게 3단계로 나눌 수 있다:

1. **서블릿 클래스 로딩 및 인스턴스화**: 서블릿 컨테이너가 서블릿 클래스를 로드하고 인스턴스를 생성한다. 이 과정은 서블릿의 `init()` 메서드에서 초기화 작업을 수행한다.

2. **요청 처리**: 클라이언트의 요청이 들어오면 서블릿의 `service()` 메서드가 호출되어 요청을 처리한다. `doGet()`, `doPost()` 등 HTTP 메서드에 맞는 메서드가 호출된다.

3. **서블릿 종료**: 서블릿이 더 이상 필요하지 않으면 `destroy()` 메서드가 호출되어 종료된다.

---

## 서블릿 예제

```java
@WebServlet("/pokeController")
public class PokeController extends HttpServlet {

    @Override
    public void init(ServletConfig config) throws ServletException {
        super.init(config);
        // 서블릿 초기화 작업
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // 요청 처리 로직
        RequestDispatcher dispatcher = request.getRequestDispatcher("/pokemon.jsp");
        dispatcher.forward(request, response);
    }
}

```

---

## 서블릿 컨테이너
서블릿은 웹 애플리케이션 서버에 배포되어 실행된다. 이 서버는 서블릿을 실행하고, HTTP 요청을 처리하며, 서블릿 간의 생명주기를 관리하는 역할을 한다. 대표적인 서블릿 컨테이너는 다음과 같다:

- Apache Tomcat
- Jetty
- WildFly

---

## 서블릿과 JSP
서블릿은 비즈니스 로직을 처리하는 데 사용되고, JSP는 뷰(View)를 생성하는 데 사용된다. 서블릿에서 처리한 데이터를 JSP로 전달하여 최종적으로 사용자에게 동적인 HTML을 생성하여 전달한다. 서블릿과 JSP는 종종 함께 사용되며, 요청과 응답을 분리하여 더 유지보수가 용이한 웹 애플리케이션을 개발할 수 있다.

---

## 서블릿의 장점

- 확장성: 서블릿은 서버 측에서 실행되므로, 서버의 부하를 관리하고, 여러 클라이언트의 요청을 동시에 처리할 수 있다.
- 유연성: 서블릿은 클라이언트의 요청을 동적으로 처리할 수 있어 다양한 기능을 지원한다.
서버 측 로직 처리: 비즈니스 로직을 서버 측에서 처리하여 클라이언트가 처리할 부하를 줄인다.

---

## 서블릿에서 스프링과 같은 프레임워크로 넘어가는 이유

1. **편리한 개발 환경 제공**

   서블릿을 사용할 때는 요청을 처리하는 로직, 데이터베이스 연결, 세션 관리, 트랜잭션 처리 등을 모두 직접 구현해야 한다. 이런 작업은 개발자가 반복적으로 해야 하는 작업들이 많고, 실수가 발생할 여지가 크다. 반면, 스프링 프레임워크는 이러한 복잡한 작업들을 추상화하여 제공한다. 예를 들어, Spring MVC는 서블릿을 기반으로 한 웹 애플리케이션 개발을 쉽게 해 주며, AOP(Aspect-Oriented Programming)를 통해 코드의 중복을 줄여주고, IoC(인버전 오브 컨트롤)를 통해 객체의 생성과 관리를 자동화한다.
   <br/>
   <br/>

2. **비즈니스 로직과의 분리**

   서블릿에서는 모든 로직이 하나의 클래스에 들어가게 되는 경우가 많다. 이는 코드의 유지보수나 확장을 어렵게 만들 수 있다. 스프링은 계층 구조로 구성되어, 비즈니스 로직(Service), 데이터 처리(Repository), 웹 계층(Controller)을 분리할 수 있다. 이를 통해 각 계층을 독립적으로 개발하고 유지보수할 수 있게 된다.
   <br/>
   <br/>

3. **자동화된 트랜잭션 관리**

   서블릿에서는 데이터베이스와의 트랜잭션을 수동으로 처리해야 한다. 트랜잭션 처리 코드가 많아지면 관리가 어려워질 수 있다. 스프링은 선언적 트랜잭션 관리를 제공하여 트랜잭션을 자동으로 관리하고, 개발자가 이를 신경 쓰지 않아도 되도록 한다.
   <br/>
   <br/>

4. **편리한 의존성 주입(DI)**
   
    스프링은 **의존성 주입(Dependency Injection, DI)**을 통해 객체 간의 결합도를 낮추고, 유지보수성을 높인다. 서블릿에서는 의존성 주입을 수동으로 처리해야 하고, 객체가 많아질수록 관리가 어려워진다. 하지만 스프링은 DI 컨테이너를 사용해 객체의 생명주기를 관리하고, 필요한 의존성을 자동으로 주입해준다.
   <br/>
   <br/>

5. **다양한 기능의 지원**

   서블릿은 주로 HTTP 요청을 처리하는 데 초점을 맞추고 있지만, 스프링은 다양한 기능을 제공한다. 예를 들어, 스프링은 보안, 배치 처리, 메시지 처리, RESTful API 지원 등 여러 가지 부가적인 기능들을 내장하고 있어, 이를 직접 구현할 필요가 없다.
   <br/>
   <br/>

6. **테스트 용이성**

   서블릿에서는 테스트 코드를 작성하는 것이 어렵고, 테스트 환경을 구축하는 데 시간이 많이 소요된다. 스프링은 테스트 지원 기능을 강화하여, 단위 테스트와 통합 테스트를 손쉽게 작성할 수 있게 해준다. 스프링은 JUnit과 통합하여 테스트를 자동화할 수 있으며, 테스트 주도 개발(TDD)을 장려한다.
   <br/>
   <br/>


## 결론
서블릿은 기본적인 웹 애플리케이션을 구축하는 데 유용하지만, 비즈니스 로직과 웹 처리 로직을 분리하고, 자동화된 기능을 제공하는 프레임워크가 필요하다. 스프링은 이러한 요구 사항을 충족시키며, 효율적이고 확장 가능한 애플리케이션을 개발할 수 있는 다양한 도구와 기능을 제공한다. 따라서 많은 개발자들이 서블릿에서 스프링과 같은 프레임워크로 넘어가고 있다.
